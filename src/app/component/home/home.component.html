<main>
    <!-- Sección noticia destacada -->
  <section class="featured-section" *ngIf="mainStory$ | async as mainStory">
    <div class="container">
      <div class="featured-grid">
        <div class="main-story">
          <a [routerLink]="['/news', mainStory.id]" class="story-link">
            <div class="story-image">
              <img [src]="mainStory.image_url">
              <div class="image-overlay"></div>
              <div class="story-content">
                <span class="badge badge-urgent">Última hora</span>
                <h1 class="story-title">{{ mainStory.title }}</h1>
                <p class="story-excerpt">{{ mainStory.snippet }}</p>
                <div class="story-meta">
                  <span>{{ mainStory.timestamp | date: 'dd/MM/yyyy' }}</span>
                  <span class="separator">·</span>
                  <span>{{ mainStory.publisher }}</span>
                </div>
              </div>
            </div>
          </a>
        </div>

        <!-- Componente de noticias destacadas -->
        <app-featured-news />
      </div>
    </div>
  </section>

  <!-- Sección noticias normales -->
  <section class="news-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Noticias</h2>
      </div>

      <div class="news-grid">
        <article class="news-card" *ngFor="let news of paginatedNews$ | async">
          <div class="card-image">
            <img [src]="news.image_url ? news.image_url : '/image.png'" [alt]="news.title">
          </div>
          <div class="card-content">
            <span class="category-tag">{{ getCategoryName(news.category) || 'Sin categoría' }}</span>
            <h3 class="card-title"><a [routerLink]="['/news', news.id]">{{ news.title }}</a></h3> <!-- aca llama a news id -->
            <p class="card-excerpt">{{ news.snippet }}</p>
            <div class="card-meta">
              <span>{{ news.timestamp | date: 'dd/MM/yyyy' }}</span>
              <span>{{ news.publisher }}</span>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Paginación -->
  <div class="pagination" *ngIf="currentPage$ | async as currentPage">
    <button class="pagination-btn" [disabled]="currentPage === 1" (click)="goToPreviousPage()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><polyline points="15 18 9 12 15 6"></polyline></svg>
      Anterior
    </button>

    <div class="pagination-pages">
      <button 
        *ngFor="let page of getVisiblePages(currentPage)" 
        class="page-number" 
        [class.active]="page === currentPage"
        [class.ellipsis]="page === '...'"
        [disabled]="page === '...'"
        (click)="page !== '...' && goToPage(page)">
        {{ page }}
      </button>
    </div>

    <button class="pagination-btn" [disabled]="currentPage === totalPages" (click)="goToNextPage()">
      Siguiente
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><polyline points="9 18 15 12 9 6"></polyline></svg>
    </button>
  </div>
</main>