<main class="news-detail">
  <div class="container">
    <div class="breadcrumb">
      <a routerLink="/">Inicio</a>
      <span class="separator">/</span>
      <a [routerLink]="['/categoria', news.category.toLowerCase()]">{{ news.category }}</a>
      <span class="separator">/</span>
      <span class="current">{{ news.title }}</span>
    </div>

    <article class="article">
      <header class="article-header">
        <h1 class="article-title">{{ news.title }}</h1>
        
        <div class="article-meta">
          <div class="meta-left">
            <span class="category-tag">{{ news.category }}</span>
            <span class="publish-date">{{ news.publishDate | date:'dd MMM yyyy, HH:mm' }}</span>
          </div>
          <div class="meta-right">
            <button class="share-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                <polyline points="16 6 12 2 8 6"></polyline>
                <line x1="12" y1="2" x2="12" y2="15"></line>
              </svg>
              Compartir
            </button>
          </div>
        </div>
      </header>

      <figure class="article-image">
        <img [src]="news.imageUrl" [alt]="news.title">
        <figcaption *ngIf="news.imageCaption">{{ news.imageCaption }}</figcaption>
      </figure>

      <div class="article-author">
        <div class="author-avatar">
          <img [src]="news.authorAvatar" [alt]="news.author">
        </div>
        <div class="author-info">
          <span class="author-name">{{ news.author }}</span>
          <span class="author-role">{{ news.authorRole }}</span>
        </div>
      </div>

      <div class="article-content">
        <p class="article-summary">{{ news.summary }}</p>
        
        <div [innerHTML]="news.content"></div>
      </div>

      <div class="article-tags" *ngIf="news.tags && news.tags.length > 0">
        <span class="tag-label">Etiquetas:</span>
        <ul class="tag-list">
          <li *ngFor="let tag of news.tags">
            <a [routerLink]="['/tag', tag]" class="tag">{{ tag }}</a>
          </li>
        </ul>
      </div>

      <div class="article-actions">
        <div class="social-share">
          <span class="share-label">Compartir:</span>
          <div class="share-buttons">
            <a href="#" class="share-button" aria-label="Compartir en Facebook">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
              </svg>
            </a>
            <a href="#" class="share-button" aria-label="Compartir en Twitter">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path>
              </svg>
            </a>
            <a href="#" class="share-button" aria-label="Compartir en WhatsApp">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
              </svg>
            </a>
            <a href="#" class="share-button" aria-label="Compartir por Email">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </article>

    <section class="comments-section">
      <h2 class="section-title">Comentarios ({{ comments.length }})</h2>
      
      <div class="comment-form">
        <h3 class="form-title">Deja tu comentario</h3>
        <form (ngSubmit)="submitComment()">
          <div class="form-group">
            <label for="name">Nombre</label>
            <input type="text" id="name" name="name" [(ngModel)]="newComment.name" required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" [(ngModel)]="newComment.email" required>
          </div>
          <div class="form-group">
            <label for="comment">Comentario</label>
            <textarea id="comment" name="comment" rows="4" [(ngModel)]="newComment.content" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Enviar comentario</button>
        </form>
      </div>
      
      <div class="comments-list">
        <div class="comment" *ngFor="let comment of comments">
          <div class="comment-header">
            <div class="comment-author">
              <div class="author-avatar">
                <img [src]="comment.avatar" [alt]="comment.name">
              </div>
              <div class="author-info">
                <span class="author-name">{{ comment.name }}</span>
                <span class="comment-date">{{ comment.date | date:'dd MMM yyyy, HH:mm' }}</span>
              </div>
            </div>
            <button class="reply-btn">Responder</button>
          </div>
          <div class="comment-content">
            <p>{{ comment.content }}</p>
          </div>
          
          <!-- Comentarios anidados -->
          <div class="nested-comments" *ngIf="comment.replies && comment.replies.length > 0">
            <div class="comment nested" *ngFor="let reply of comment.replies">
              <div class="comment-header">
                <div class="comment-author">
                  <div class="author-avatar">
                    <img [src]="reply.avatar" [alt]="reply.name">
                  </div>
                  <div class="author-info">
                    <span class="author-name">{{ reply.name }}</span>
                    <span class="comment-date">{{ reply.date | date:'dd MMM yyyy, HH:mm' }}</span>
                  </div>
                </div>
              </div>
              <div class="comment-content">
                <p>{{ reply.content }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="related-news">
      <h2 class="section-title">Noticias relacionadas</h2>
      <div class="news-grid">
        <article class="news-card" *ngFor="let relatedNews of relatedNews">
          <div class="card-image">
            <img [src]="relatedNews.imageUrl" [alt]="relatedNews.title">
          </div>
          <div class="card-content">
            <span class="category-tag">{{ relatedNews.category }}</span>
            <h3 class="card-title"><a [routerLink]="['/noticia', relatedNews.id]">{{ relatedNews.title }}</a></h3>
            <p class="card-excerpt">{{ relatedNews.excerpt }}</p>
            <div class="card-meta">
              <span>{{ relatedNews.time }}</span>
              <span>{{ relatedNews.author }}</span>
            </div>
          </div>
        </article>
      </div>
    </section>
  </div>
</main>