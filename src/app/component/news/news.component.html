<main class="news-detail" *ngIf="newsData$ | async as data">
  <div class="container">
    <!-- Main Article -->
    <article class="article">
      <header class="article-header">
        <h1 class="article-title">{{ data.news.title }}</h1>
        <div class="article-meta">
          <div class="meta-left">
            <a class="category-tag" [routerLink]="['/category', data.news.category?.toLowerCase()]">
              {{ data.news.category }}
            </a>
            <span class="publish-date">{{ data.news.timestamp | date: 'dd MMM yyyy, HH:mm' }}</span>
            <span class="publisher">Publicado por {{ data.news.publisher }}</span>
          </div>
          <div class="meta-right">
            <button class="like-btn" (click)="toggleLike()">
              {{ userLiked ? 'üíî' : '‚ù§Ô∏è' }} {{ localLikes }}
            </button>
          </div>
        </div>
      </header>

      <figure class="article-image">
        <img [src]="data.news.image_url || '/image.png'" [alt]="data.news.title">
      </figure>

      <div class="article-content">
        <p class="article-snippet">{{ data.news.snippet }}</p>
        <button class="btn-view-more" (click)="openNewsUrl(data.news.newsUrl)">
          Ver m√°s
        </button>
      </div>
    </article>

    <app-comment [newsId]="data.news.id"></app-comment>

    <!-- Related News -->
    <section class="related-news" *ngIf="data.subNews?.length">
      <h2 class="section-title">Noticias relacionadas</h2>
      <div class="news-grid four-columns">
        <article class="news-card" *ngFor="let news of data.subNews">
          <div class="card-image">
            <img [src]="news.image_url || '/image.png'" [alt]="news.title">
          </div>
          <div class="card-content">
            <h3 class="card-title">
              <a [routerLink]="['/news', news.id]">{{ news.title }}</a>
            </h3>
            <p class="card-excerpt">{{ news.snippet }}</p>
            <div class="card-meta">
              <span>{{ news.timestamp | date: 'dd/MM/yyyy' }}</span>
              <span>{{ news.publisher }}</span>
            </div>
          </div>
        </article>
      </div>
    </section>
  </div>
</main>
